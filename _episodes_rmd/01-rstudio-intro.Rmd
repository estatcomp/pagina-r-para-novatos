---
title: "IntroduÃ§Ã£o ao R e RStudio"
Questões:
- Como encontrar o seu camihno ao redor de RStudio?
- Como interagir com R?
- Como gerenciar seu ambiente?
- Como instalar pacotes?
exercises: 10
source: Rmd
teaching: 45
Objetivos:
- Obter familiaridade com os vÃ¡rios panÃ©is no IDE do RStudio
- Obter familiaridade com os botÃµes, atalhos e opÃ§Ãµes no IDE do RStudio
- Entender variÃ¡veis e como atribuir a ela
- Ser capaz de gerenciar seu espaÃ§o de trabalho em uma sessaÃ£o interativa de R
- Ser capaz de usar operaÃ§oÃµes matemÃ¡ticas e de comparaÃ§Ã£o
- Ser capaz de chamar funÃ§Ãµes
- Introduzir o gerenciamento de pacotes
---

```{r, include=FALSE}
source("../bin/chunk-options.R")
knitr_fig_path("01-")
```


## Motivação

A ciência é um processo de várias etapas: uma vez que você criou uma experiência e coletou dados, a verdadeira diversão começa! Esta lição ensinará como iniciar este processo usando R e RStudio. Começaremos com dados brutos, realizaremos análises exploratórias e aprenderemos a traçar resultados graficamente. Este exemplo começa com um conjunto de dados de [gapminder.org](https://www.gapminder.org) que contém informações de população para muitos países ao longo do tempo. Você pode ler os dados em R? Pode traçar a população para o Senegal? Você pode calcular a renda média dos países do continente asiático? No final dessas lições você será capaz de fazer coisas como tramar as populações de todos esses países em menos de um minuto!

## Antes de iniciar o Workshop

Certifique-se de que tem a versão mais recente do R e do RStudio instalados na sua máquina. Isso é importante, pois alguns pacotes usados no workshop podem não ser instalados corretamente (ou em todos) se R não estiver atualizado.

[Download and install the latest version of R here](https://www.r-project.org/)
[Download and install RStudio here](https://www.rstudio.com/)

## Introduçaõ ao RStudio 


Bem-vindo à parte do R do Software Carpentry.

Ao longo desta lição, vamos ensinar-lhe alguns dos fundamentos da linguagem R, bem como algumas práticas recomendadas para organizar o código para projetos científicos que facilitarão a sua vida.

Estaremos usando o RStudio: um ambiente de desenvolvimento integrado livre e de código aberto. Ele fornece um editor embutido, funciona em todas as plataformas (incluindo servidores) e oferece muitas vantagens, como integração com controle de versão e gerenciamento de projetos. 



**Layout básico**

Quando você abrir RStudio pela primeira vez, você será recebido por três painéis: 

  * O console R interativo (todo à esquerda)
  * Ambiente/História (tabulada no canto direito)
  * Archivos/Gráficos/Pacotes/Ajuda/Visualizador (com abas na parte inferior direita)

![](http://swcarpentry.github.io/r-novice-gapminder/fig/01-rstudio.png)

Depois de abrir arquivos, como R scripts, um painel de editor também será aberto no canto superior esquerdo. 


![](http://swcarpentry.github.io/r-novice-gapminder/fig/01-rstudio-script.png) 


## Fluxo de trabalho no RStudio
Existem duas maneiras principais de se trabalhar dentro do RStudio.

1. Teste e jogue dentro do console R interativo, em seguida, copie o código para um arquivo .R para ser executado posteriormente.
   *  Isso funciona bem ao fazer pequenos testes e inicialmente começar.
   *  Torna-se rapidamente trabalhoso.
2. Comece a escrever em um arquivo .R e use o comando / atalho RStudio para pressionar a linha atual, as linhas selecionadas ou as linhas modificadas para o console R interativo. .
   * Esta é uma ótima maneira de começar; Todo o seu código é salvo para mais tarde.
   * Você poderá executar o arquivo criado a partir de RStudio ou usando a função **source ()** de R.

> ## Dica: Executando segmentos do seu código
>
> O RStudio oferece-lhe uma grande flexibilidade na execução de código 
>a partir da janela do editor. Existem botões, opções de menu e atalhos 
>de teclado. Para executar a linha atual, você pode: 1. pressionar no botão 
>Executar acima do painel do editor ou 2. selecionar "Run lines" no menu "Code",
>ou 3. pressionar Ctrl-Enter no Windows ou Linux ou Command-Enter no OS X.
>(Este atalho também pode ser visto ao passar o mouse sobre o botão).
>Para executar um bloco de código, selecione-o e, em seguida, Executar. 
>Se você modificou uma linha de código dentro de um bloco de código que 
>você acabou de executar, não há necessidade de reajustar a seção e Run, 
>você pode usar o próximo botão, Re-Run the previous code region. Isso 
>executará o bloco de código anterior incluindo as modificações feitas.
>
{: .callout}

## Introdução a R

A maior parte do seu tempo em R será gasto no console interativo R. Isto é onde você irá executar todo o seu código, e pode ser um ambiente útil para experimentar idéias antes de adicioná-los a um arquivo de script R. Este console no RStudio é o mesmo que você obteria se você digitou R em seu ambiente de linha de comando.

A primeira coisa que você vai ver na sessão interativa R é um monte de informações, seguido por um ">" e um cursor piscando. Em muitos aspectos isso é semelhante ao ambiente de shell que você aprendeu durante as lições do shell: ele opera na mesma idéia de um "Read, evaluate, print loop": você digita comandos, R tenta executá-los e, em seguida, retorna um resultado.

## Usando R como uma calculadora 

A coisa mais simples que você pode fazer com R é aritmética: 

```{r}
1 + 100
```

E R vai imprimir a resposta, com um precedente "[1]". Não se preocupe com isso por agora, vamos explicar isso mais tarde. Por agora, pense nisso como uma saída indicadora.  

Como bash, se você digitar um comando incompleto, R esperará que você o complete: 

~~~
> 1 +
~~~
{: .r}

~~~
+
~~~
{: .output}

Cada vez que você pressionar a tecla Enter e a sessão R mostre um "+" em vez de um ">", isso significa que está esperando que você complete o comando. Se você deseja cancelar um comando, você pode simplesmente presionar em "Esc" e rstudio vai lhe dar de volta o ">" alerta.

> ## Dica: Cancelamento de comandos
>
> Se você estiver usando R a partir da linha de comando em vez de 
>dentro RStudio, você precisará usar `Ctrl+C` em vez de `Esc` 
> para cancelar o comando. Isso também se aplica aos usuários de Mac!
>
> Cancelar um comando não é útil somente para matar comandos incompletos: 
> você também pode usá-lo para dizer a R para parar o código em execução
> (por exemplo, se estiver demorando muito mais do que você espera) 
>ou para se livrar do código que você está escrevendo. 
>
{: .callout}

Ao usar R como uma calculadora, a ordem das operações é a mesma que você teria aprendido na escola.  

Da precedência mais alta à mais baixa:

 * Parênteses: `(`, `)`
 * Exponentes: `^` or `**`
 * Dividir: `/`
 * Multiplicar: `*`
 * Adicionar: `+`
 * Subtrair: `-`

```{r}
3 + 5 * 2
```

Use parênteses para agrupar operações, a fim de forçar a ordem de avaliação se difere do padrão, ou para tornar claro o que você pretende. .

```{r}
(3 + 5) * 2
```

Isso pode ficar complicado quando não é necessário, mas esclarece suas intenções. Lembre-se de que os outros podem ler o seu código mais tarde. 

```{r, eval=FALSE}
(3 + (5 * (2 ^ 2))) # difícil de ler
3 + 5 * 2 ^ 2       # claro, se você se lembrar das regras
3 + 5 * (2 ^ 2)     # se você esquecer algumas regras, isso pode ajudar
```


O texto após cada linha de código é chamado de "comentário". Qualquer coisa que se segue após o hash (ou octothorpe) símbolo `#` é ignorado por R quando ele executa código.

Números realmente pequenos ou grandes obtêm uma notação científica:

```{r}
2/10000
```

Qual é taquigrafia para "multiplicado por `10^XX`". Então `2e-4` é abreviação para `2 * 10^(-4)`.


Você também pode escrever números em notação científica: 

```{r}
5e3  # Note a falta de menos aqui
```

## Funções matemáticas

R tem muitas funções matemáticas construídas. Para chamar uma função, simplesmente digite seu nome, seguido por parênteses abertos e fechados. Qualquer coisa que digitemos dentro dos parênteses é chamada de argumentos da função:

```{r}
sin(1)  # funções trigonométricas
```

```{r}
log(1)  # logaritmo natural
```

```{r}
log10(10) # logaritmo base-10
```

```{r}
exp(0.5) # e^(1/2)
```

Não se preocupe em tentar lembrar cada função em R. Você pode simplesmente procurá-los no Google, ou se lembrar do início do nome da função, use a conclusão da guia no RStudio.

Esta é uma vantagem que RStudio tem sobre R por conta própria, tem auto-conclusão habilidades que lhe permitem procurar mais facilmente as funções, os seus argumentos e os valores que eles tomam.

Digite um "?" antes do nome dum comando e abrirá uma página de ajuda para esse comando. Assim como fornecerá uma descrição detalhada do comando e como ele funciona, baixando na a detailed description of the command and how it works, a rolagem para a parte inferior da página de ajuda normalmente mostrará uma coleção de exemplos de código que ilustram o uso do comando. Passaremos por um exemplo mais adiante.

## Comparando coisas

Podemos também fazer comparação em R:

```{r}
1 == 1  # igualdade (nota dois sinais iguais, leai-se como "é igual a")
```

```{r}
1 != 2  # desigualdade (leai-se como "não é igual a")
```

```{r}
1 <  2  # menor que
```

```{r}
1 <= 1  # Menor ou igual que
```

```{r}
1 > 0  # maior que
```

```{r}
1 >= -9 #Maior ou igual que
```

> ## Dica: Comparando Números
>
>Uma palavra de advertência sobre a comparação de números: 
>você nunca deve usar `==` para comparar dois números a
> menos que sejam inteiros (um tipo de dados que pode representar
> especificamente apenas números inteiros).
>
> Os computadores só podem representar números decimais com 
>um certo grau de precisão, então dois números que parecem os mesmos
>quando impressos por R, podem realmente ter diferentes representações 
>subjacentes e, portanto, ser diferentes por uma pequena margem de erro 
>(chamada tolerância numérica da máquina).
>
> Em vez disso, você deve usar a função `all.equal`.
> Leitura adicional:     [http://floating-point-gui.de/](http://floating-point-gui.de/)
> 
{: .callout}

## Variáveis e atribuição 

Podemos armazenar valores em variáveis usando o operador de atribuição `<-`, assim: 

```{r}
x <- 1/40
```

Observe que a atribuição não imprime um valor. Em vez disso, nós armazenamos isso para mais tarde em algo chamado de **variável**, `x` agora contém o **valor** `0.025`:

```{r}
x
```

Mais precisamente, o valor armazenado é uma *aproximação decimal* dessa fração chamada uma [Número de ponto flutuante](http://en.wikipedia.org/wiki/Floating_point).

Procure a guia `Ambiente` em um dos painéis do RStudio, e você verá que `x` e seu valor apareceram. Nossa variável `x` pode ser usada no lugar de um número em qualquer cálculo que espera um número: 

```{r}
log(x)
```

Observe também que as variáveis podem ser reatribuídas:

```{r}
x <- 100
```

`x` usado para conter o valor 0.025 e agora ele tem o valor 100.  

valores asignados podem conter a variável sendo assignidada:

```{r}
x <- x + 1 #observe como o RStudio atualiza sua descrição de x na guia superior direita
```

O lado direito da atribuição pode ser qualquer expressão R válida. 
O lado direito é *totalmente avaliado* antes da atribuição ocorrer.

Nomes de variáveis podem conter letras, números, sublinhados e pontos. Eles não podem começar com um número nem conter espaços em tudo. Diferentes pessoas usam convenções diferentes para nomes de variáveis longas,

  * pontos.entre.palavras
  * sublinha\_entre_palavras
  * cameloCasoParaSeparadoPalavras

O que você usa depende de você, mas seja **consistente**.

Também é possível usar o operador = para atribuição: 

```{r}
x = 1/40
```

Mas isso é muito menos comum entre os usuários de R. O mais importante é ser **consistente** com o operador que você usa. Há ocasionalmente lugares onde é menos confuso usar `<-` than `=`, e é o símbolo mais comum usado na comunidade. Portanto, a recomendação é usar `<-`. 

## Vetorização

É de extrema relevância compreender que o R é um software vetorizado. Isso simplesmnte quer dizer que variáveis e funções podem receber vetores. 
Veja os exemplos abaixo:

```{r}
1:5
2^(1:5)
x <- 1:5
2^x
```

A possibilidade de variáveis e funções receber valores faz do R um software extremamente poderoso. Este tópico será abordado em detalhes adiante.


## Controlando o ambiente de trabalho

Existem alguns comandos que o usuário pode utilizar para interagir com o ambiente de trabalho do R.

A função `ls`, por exemplo, lista todas as variáveis e funções gravadas no ambiente de trabalho.


```{r}
ls()
```

> ## Dica: Objetos escondidos
>
> A função `ls()`não mostra variáveis e funções que começão com `.`.
> A função  Para listar todos os objetos, inclusive os que   iniciam com `.`, digite `ls(all.names=TRUE)` e não `ls()`.
> 
{: .callout}

Note que na função `ls` não é necessário fornecer argumentos, mas é necessário colocar parêntesis para que o R entenda que se trata de uma função.

Se digitarmos apenas `ls` o R nos fornecerá o código fonte da função!

```{r}
ls
```

Pode ser interessante deletar objetos que não serão utilizados adiante. Para isso utilizamos a função `rm`.

```{r}
rm(x)
```

Se muitos objetos devem ser excluídos de uma só vez não há necessidade de excluir um por um. Basta utilizar a função `ls` conjugada com a `rm` da seguinte forma:

```{r}
rm(list = ls())
```

Neste caso duas funções foram utilizadas em conjunto. Sempre que este for o caso o que está localizado dentro do parêntesis mais interno será avaliado primeiro e assim em diante.

No caso acima foi especificado que o resultado da função `ls` deveria ser usado na forma de lista `list` como argumento da função `rm`. Quando destinados valores de argumentos a funções por nome, o operador a ser utilizado deverá ser o símbolo `=`.

Se utilizarmos `<-` teremos efeitos indesejados ou  mensagens de erro.
```{r, error=TRUE}
rm(list <- ls())
```

> ## Dica: Avisos vs Erros
>
> Fique atento pois o R poderá fazer algo inesperado.
> Erros, como no caso acima, ocorrem quando o R não consegue efetuar as operações.
> Avisos, por outro lado, indicam que o R conseguiu efetuar as operações, mas algo  provavelmente não ocorreu como esperado.
>
> Em ambos os casos, as mensagens que o R fornece ajudam a consertar o problema.
>
{: .callout}

## Pacotes do R

É possível adicionar funções ao R através da escrita de pacote escritos por você mesmo, ou por pacotes escritos por outras pessoas. Hoje existem mais de 7000 pacotes disponíveis no CRAN (*the comprehensive R archive network*). O R e o Rstudio possuem elevada funcionalidade no quesito de gerenciamento de pacotes:

* É possível ver quais pacotes estão instalados. Para isso devemos digitar `installed.packages()`.
* É possível instalar novos pacotes ao digitar `install.packages("packagename")`, onde `packagename` é o nome do pacote a ser instalado. 
* É possível atualizar pacotes já instalados. A função utilizada é `update.packages()`.
* É possível remover pacotes com a função `remove.packages("packagename")`. 
* É possível tornar um pacote habilitado ao uso. A função utilizada neste caso é `library(packagename)`.

> ## Desafio 1
>
> Quais nomes a seguir são válidos para variáveis no R ?
> ```{r, eval=FALSE}
> min_height
> max.height
> _age
> .mass
> MaxLength
> min-length
> 2widths
> celsius2kelvin
> ```
>
> > ## Solução do desafio 1
> >
> > Os nomes a seguir são válidos:
> > ```{r ch1pt1-sol, eval=FALSE}
> > min_height
> > max.height
> > MaxLength
> > celsius2kelvin
> > ```
> >
> > O nome a seguir cria uma variável escondida
> > ```{r ch1pt2-sol, eval=FALSE}
> > .mass
> > ```
> >
> > Os nomes a seguir não podem ser usados para nomear objetos
> > ```{r ch1pt3-sol, eval=FALSE}
> > _age
> > min-length
> > 2widths
> > ```
> {: .solution}
{: .challenge}

> ## Desafio 2
>
> Quais serão os valores das variáveis definidas abaixo ?
>
> ```{r, eval=FALSE}
> mass <- 47.5
> age <- 122
> mass <- mass * 2.3
> age <- age - 20
> ```
>
> > ## Solução do desafio 2
> >
> > ```{r ch2pt1-sol}
> > mass <- 47.5
> > ```
> > Este comando atribui o valor 47.5 para a variável ` mass` for the variable mass
> >
> > ```{r ch2pt2-sol}
> > age <- 122
> > ```
> > Este comando atribiu o valor 122 para a variável ` age` 
> >
> > ```{r ch2pt3-sol}
> > mass <- mass * 2.3
> > ```
> > O valor da variável ` mass`será dividido por 2.3 e a variável ` mass` passará a ter um novo valor.
> > 
> >
> > ```{r ch2pt4-sol}
> > age <- age - 20
> > ```
> > Será realizada uma subtração de 20 unidades na variável ` age`.
> > 
> {: .solution}
{: .challenge}


> ## Desafio 3
>
> Rode os códigos do desafio anterior, escreva um comando e compare massa com idade. 
> A massa é maior que a idade ?
>
> > ## Solução do desafio 3
> >
> > Uma maneira de realizar esta tarefa é utilizar `>`:
> > ```{r ch3-sol}
> > mass > age
> >```
> > O resultado a ser retornado deve ser `TRUE` porque a variável ` mass` é maior que ` age`.
> {: .solution}
{: .challenge}


> ## Desafio 4
>
> Limpe o seu ambiente de trabalho. Delete as variáveis massa e idade.
>
>
> > ## Solução do desafio 4
> >
> > O comando `rm` pode ser utilizado para realizar essa tarefa
> > ```{r ch4-sol}
> > rm(age, mass)
> > ```
> {: .solution}
{: .challenge}

> ## Desafio 5
>
> Instale os pacotes `ggplot2`, `plyr` e `gapminder`.
>
> > ## Solução do desafio 5
> >
> > Podemos utilizar o comando `install.packages()` para instalar os referidos pacotes.
> > ```{r ch5-sol, eval=FALSE}
> > install.packages("ggplot2")
> > install.packages("plyr")
> > install.packages("gapminder")
> >```
> {: .solution}
{: .challenge}
